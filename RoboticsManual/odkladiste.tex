
 \section{Vìci okolo programování v C}
  
  není rovno se píše != (ne <>)
  
  øetìzcové pole se píše promìnná[] pøi deklaraci, promìnná (bez závorek) potom 
  
 znak dìlení /   pokud jsou oba operandy celoèíselné, tak se provede CELOÈÍSELNÉ dìlení, pokud je alespoò jeden operand desetinnı, pak se provede normální dìlení
 
 \verb#&&# - znak pro and; ostatní logické operátory  mají taky svoje znaky 
 
 \verb#||# -- znak pro or;
 
 èíslo a znak je to samé 
 
 øetìzec je pole znakù - znaky do nìj musím vkládat na danou pozici 
 délka øetìzce je daná pøi deklaraci vyjímka je pøiøazení typu   
 
 apostrofy 'r' oznaèují jeden znak, "x" uvozovky oznaèují øetìzec - to je rozdíl 
 
 pøi zadávání konstant ta konstanta nesmí zaèínat nulou, jinak ji bere, e je v osmièkové soustavì - a vısledek je chyba, která se moc blbì hledá
 
poslední znak øetìzce je 0, je tam navíc, take délka desetiznakového øetìzce je 11 znakù 

všechny registy jsou volatile -- program nemùe v podmínce while ignorovat ètení registrù, i kdy ta podmínka nic potom nedìlá, protoe hodnoty v registru se mùou zmìnit  
-----------------------------------------------------------

\section{USART}


Sbìrnice -- umoòuje posílat data mezi rùznımi zaøízeními.   

\subsection{Typy sbìrnic}

USART - minimum drátù, rychı, jednoduchı, dvì zaøízení 

SPI - libovolnı poèet zaøízení, jednoduchá adresace, pouze synchoní pøenos 

IIC - víc zaøízení v rámci jednoho malého systému, dva dráty, hodiny a data 
v jednom systému mùe bıt více masters 
 
\subsection{Vıbìt typu pøenosu }


pøenos devíti bitù - devátı bit rozlišuje, jestli je to adresa, nebo data. 
Pouívá se pro multiprocesorovou komunikaci -- nepouijeme to  

? Multi-processor Communication Mode str 163 - nepouívat 

jeden nebo dva stop bity - jeden staèí, kdyby byly dva, mùe se to hodit pro 
1) delší èas na zpracování signálu, 
2) líp se chytá konec bajtu -- lepší v pøípadì poruchovıch pøenosù 
> budeme pouívat jeden, nemusí se to nastavovat 


 Parita - kontrolní proces - zahlásí chyby v pøenosu - str 169 pøi zapojení na jedné desce a v blízkém okolí není potøeba, data se neztrácí 
 
 zvolit 38.4 kb/s - je to osvìdèená rychlost, malá chybovost a Junior na ní komunikuje - budeme kompatibilní 
 
 synchronní komunikace -- jsou potøeba hodiny (hodinovı signál na pinu SCK) 
 hodí se pro dlouhé kusy dat a hlavnì pro komunikaci s periferiemi, které jinou monost neposkytují 
 
 asynchronní komunikace -- staèí propojit Rx a Tx na obou stranách a stejnì nastavit oba èipy. není nutné øešit hodiny --  doporuèeno   
 
 je to taky jedinı zpùsob, jak komunikovat s poèítaèem, je to úplnì stejnı protokol jako RS 232 (sériovı port) a liší se to pouze napìovou úrovní -- MAX232 pouze pøevádí napìové úrovnì a nic jiného (vlastnì je MAX232 DC/DC mìniè)
 
 data overrun? 
 
Chceme: asynchronní pøenos na 38.4 kb/s bez kontrol  


\subsection{Nastavení}

(ádná knihovna pro usart není)
Je potøeba nastavit: 
- spustit USART (inicializace):  (str 152)
   - nastavit frekvenci pøenosu (baud rate)  --- 38.4 kb/s 
   - nastavit, e pøenášíme 8-mi bitové znaky bez kontrol  (frame format ) (UCSRB,C)
   - nastavit piny 14 a 15 jako Rx a Tx 
   - e je to  asynchronní pøenos (mode of operation), je nastaveno implicitnì 
   - pokud chceme pouívat pøerušení od usart, musí bıt bìhem inicializace 
     globální pøerušení vypnuto 
   - pøitom musí bıt URSEL = 1 v registru UCSRC (implicitnì je)
 


 
 



 

 

